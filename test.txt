# Припустимо, ми запустили сервер так:
# node server.js -h localhost -p 8080 -c ./my-cache
#
# І у нас є файл 'my_cat.jpeg' в тій самій директорії.

# -----------------------------------------------------------------
# 1. Tест PUT (Завантаження картинки для коду 201)
# Очікуємо: 201 Created
# -----------------------------------------------------------------
curl -X PUT --data-binary "@my_cat.jpeg" http://localhost:8080/201 -v

# -----------------------------------------------------------------
# 2. Тест GET (Cache Hit)
# Отримуємо ту саму картинку, яку щойно завантажили.
# Очікуємо: 200 OK та дані картинки
# -----------------------------------------------------------------
curl -X GET http://localhost:8080/201 -o received_201.jpeg
# (Перевірте, чи файл received_201.jpeg з'явився і є картинкою)

# -----------------------------------------------------------------
# 3. Тест GET (Cache Miss + Proxy Fetch)
# Запитуємо код, якого ще немає в кеші (наприклад, 418 I'm a teapot).
# Сервер має завантажити його з http.cat.
# Очікуємо: 200 OK та дані картинки
# -----------------------------------------------------------------
curl -X GET http://localhost:8080/418 -o received_418.jpeg
# (Перевірте, чи файл received_418.jpeg з'явився і є картинкою "I'm a teapot")

# -----------------------------------------------------------------
# 4. Тест GET (Cache Hit - після проксі)
# Запитуємо 418 ще раз. Сервер має взяти його з кешу (це має бути швидше).
# Очікуємо: 200 OK та дані картинки
# -----------------------------------------------------------------
curl -X GET http://localhost:8080/418 -o received_418_from_cache.jpeg

# -----------------------------------------------------------------
# 5. Тест DELETE (Успішне видалення)
# Видаляємо картинку 201, яку завантажили на кроці 1.
# Очікуємо: 200 OK
# -----------------------------------------------------------------
curl -X DELETE http://localhost:8080/201 -v

# -----------------------------------------------------------------
# 6. Тест DELETE (Not Found)
# Намагаємося видалити ту саму картинку 201 ще раз.
# Очікуємо: 404 Not Found
# -----------------------------------------------------------------
curl -X DELETE http://localhost:8080/201 -v

# -----------------------------------------------------------------
# 7. Тест GET (Not Found - Помилка проксі)
# Запитуємо код, якого не існує навіть на http.cat (наприклад, 999).
# http.cat поверне 404, і наш сервер має повернути 404.
# Очікуємо: 404 Not Found
# -----------------------------------------------------------------
curl -X GET http://localhost:8080/999 -v

# -----------------------------------------------------------------
# 8. Тест 405 (Method Not Allowed)
# Використовуємо метод, який ми не обробляємо (наприклад, POST).
# Очікуємо: 405 Method Not Allowed
# -----------------------------------------------------------------
curl -X POST http://localhost:8080/200 -v

# -----------------------------------------------------------------
# 9. Тест 400 (Bad Request)
# Використовуємо URL, що не відповідає формату /<код>.
# Очікуємо: 400 Bad Request
# -----------------------------------------------------------------
curl -X GET http://localhost:8080/hello -v
curl -X GET http://localhost:8080/ -v